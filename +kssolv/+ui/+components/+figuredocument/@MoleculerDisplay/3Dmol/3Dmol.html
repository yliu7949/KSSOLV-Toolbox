<!DOCTYPE html>
<html>
<head>
    <script src="./3Dmol-min.js"></script>
    <style>
        .mol-container {
            width: 100%;
            height: 613px;
            position: relative;
        }
    </style>
</head>
<body>
    <div id="container-01" class="mol-container"></div>

    <script type="text/javascript">
        function setup(htmlComponent) {
            htmlComponent.addEventListener("DataChanged", dataFromMATLABToHTML);
            
            function dataFromMATLABToHTML(event) {
                let text = htmlComponent.Data;
                console.log("New data from MATLAB:", text);
                
                let element = document.querySelector('#container-01');
                let config = { backgroundColor: 'white' };
                let viewer = $3Dmol.createViewer(element, config);
                let m = viewer.addModel(text, "cif");
                viewer.addUnitCell(m);
                viewer.setStyle({'sphere':{'colorscheme':'Jmol', 'scale':.2},'stick':{'colorscheme':'Jmol', 'radius': 0.2}})
                viewer.replicateUnitCell(1);
                viewer.zoomTo();
                viewer.render();
                viewer.zoom(1.5, 1500);
            }
        };
    </script>
</body>
</html>

